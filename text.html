<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>菜鸟教程(runoob.com)</title>
<style>
div {
    border: 1px solid black;
    width: 200px;
    height: 100px;
    overflow: scroll;
}
</style>
</head>
<body>

<p>尝试滚动 div。</p>
<div onscroll="throttle(myFunction)">In my younger and more vulnerable years my father gave me some advice that I've been turning over in my mind ever since.
<br><br>
'Whenever you feel like criticizing anyone,' he told me, just remember that all the people in this world haven't had the advantages that you've had.'</div>
<p>滚动 <span id="demo">0</span> 次。</p>
<script>
x = 0;
function myFunction() {
    document.getElementById("demo").innerHTML = x += 1;
}

// 函数防抖
function debounce(method,context){
    clearTimeout(method.tId);
    method.tId=setTimeout(function(){
        method.call(context)
    },3000)
}

// 函数节流
function throttle(fn) {
  let previous = null;

  return function () {
    let now = +new Date();
    if(now - previous > 1000 || !previous) {
      fn();
      previous = now;
    }
  }
}

// Promise和async
function resolveAfter2Seconds(x) {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(x);
    }, 2000);
  });
}


async function f1() {
  var x = await resolveAfter2Seconds(10);
  console.log(x); // 10
}
f1()

// 仿照map重写函数，异步？
Array.prototype.momo = async function (fn) {
   let result = await [];
  for(let a of this) {
    result.push(fn(a))
  }
  return result
}
const a=[1,2];
const b = a.momo((a) => a + 4 ).then(((res) => {
  console.log(res)
}))
console.log(b);

</script>

</body>
</html>